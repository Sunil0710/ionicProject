{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACd;AAOlC;IAAA;IAEA,CAAC;IAFY,UAAU;QALtB,uEAAQ,CAAC;YACN,YAAY,EAAE,CAAC,uDAAQ,CAAC;YACxB,OAAO,EAAE,CAAC,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC,CAAC;SAChD,CAAC;OAEW,UAAU,CAEtB;IAAD,iBAAC;CAAA;AAFsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTmB;AACsC;AACS;AAEpD;AAE6B;AAOlE;IAME,kBACS,OAAsB,EACtB,SAAoB,EACnB,QAA6B,EAC9B,eAAsC,EACrC,KAAmB;QAJpB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACnB,aAAQ,GAAR,QAAQ,CAAqB;QAC9B,oBAAe,GAAf,eAAe,CAAuB;QACrC,UAAK,GAAL,KAAK,CAAc;QAP7B,iBAAY,GAAW,CAAC,CAAC;QAUrB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ;aACjC,cAAc,CAAC,EAAE,CAAC,CAAE,6DAA6D;aACjF,eAAe,EAAE;aACjB,IAAI,CACH,2DAAG,CAAC,iBAAO;YACT,cAAO,CAAC,GAAG,CAAC,WAAC,IAAI,mBAEb,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAK,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAEzC,EAJgB,CAIhB,CAAC;QAJF,CAIE,CAAC,CACN,CAAC;QAEF,qDAAqD;IACzD,CAAC;IAGD,kCAAe,GAAf;QACE,OAAO,CAAC,GAAG,CAAC,SAAS,GAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;QAEpD,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAExC,EAAE,EAAC,KAAK,CAAC,EAAC;YACR,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ;iBACjC,qBAAqB,CAAC,KAAK,CAAC;iBAC5B,eAAe,EAAE;iBACjB,IAAI,CACH,2DAAG,CAAC,iBAAO;gBACT,cAAO,CAAC,GAAG,CAAC,WAAC,IAAI,mBAEb,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAK,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAEzC,EAJgB,CAIhB,CAAC;YAJF,CAIE,CAAC,CACN,CAAC;QACJ,CAAC;IAEH,CAAC;IAED,cAAc;IACd,8BAAW,GAAX,UAAY,KAAK;QACf,IAAI,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;QAC7B,kCAAkC;QAClC,gCAAgC;QAEhC,EAAE,EAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC,EAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,eAAe,EAAE;iBACvE,IAAI,CACL,2DAAG,CAAC,iBAAO;gBACT,cAAO,CAAC,GAAG,CAAC,WAAC,IAAI,mBAEb,GAAG,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,IAAK,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAEzC,EAJgB,CAIhB,CAAC;YAJF,CAIE,CAAC,CACN,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,SAAS,CAAC;IACtC,CAAC;IAED,mEAAmE;IACnE,6BAAU,GAAV,UAAW,IAAS;QAClB,qBAAqB;QACrB,EAAE,EAAC,IAAI,CAAC,MAAM,KAAK,QAAQ,CAAC,EAAC;YAC3B,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,cAAc;IACd,8BAAW,GAAX,UAAY,IAAI;QAAhB,iBA+CC;QA9CC,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YAC5C,KAAK,EAAE,MAAM;YACb,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,OAAO;oBACb,IAAI,EAAE,aAAa;oBACnB,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAE,IAAI,CAAC,KAAK,CAAC,CAAC;wBAC1C,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;wBACtB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;4BAChC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;4BACzB,KAAI,CAAC,KAAK,CAAC,IAAI,CAAI,IAAI,CAAC,KAAK,eAAY,CAAC,CAAC;wBAC7C,CAAC,CAAC;oBACJ,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,OAAO;oBACb,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,eAAe,GAAE,IAAI,CAAC,KAAK,CAAC,CAAC;wBACzC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAI,IAAI,CAAC,KAAK,cAAW,CAAC,CAAC;oBAC5C,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,SAAS;oBACf,OAAO,EAAE;wBACP,yCAAyC;wBACzC,2CAA2C;wBAC3C,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;wBACxB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;4BAChC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;4BACzB,KAAI,CAAC,KAAK,CAAC,IAAI,CAAI,IAAI,CAAC,KAAK,gBAAa,CAAC,CAAC;4BAC5C,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;wBACnC,CAAC,CAAC;oBACJ,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;wBACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBAChC,CAAC;iBACF;aACF;SACF,CAAC,CAAC;QAEH,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,8BAA8B;IACvD,CAAC;IAjIU,QAAQ;QAJpB,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;WACG;SACzB,CAAC;6EAQ+B;YACX,0GAAS;YACT,4EAAmB;YACb,qFAAqB;YAC9B,KAAY;OAXlB,QAAQ,CAmIpB;IAAD,CAAC;AAAA;SAnIY,QAAQ,e","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\n\n@NgModule({\n    declarations: [HomePage],\n    imports: [IonicPageModule.forChild(HomePage)]\n})\n\nexport class HomeModule{\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { NavController, IonicPage, ActionSheetController, NavParams } from 'ionic-angular';\nimport { ShoppingListService } from '../../services/shopping-list/shopping-list-service';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Item } from '../../models/item/item.model';\nimport { ToastService } from '../../services/toast/toast-service';\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  shoppingList$: Observable<Item[]>;\n\n  lastKeypress: number = 0;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private shopping: ShoppingListService,\n    public actionSheetCtrl: ActionSheetController,\n    private toast: ToastService\n  ) {\n\n      this.shoppingList$ = this.shopping\n      .getFiltersList('')  // we can use getActiveItems() will return only actived Items\n      .snapshotChanges()\n      .pipe(\n        map(changes =>\n          changes.map(c => (\n            {\n              key: c.payload.key, ...c.payload.val()\n            }\n          )))\n      );\n\n      // this.shoppingList$.subscribe(x => console.log(x));\n  }\n\n\n  ionViewWillLoad() {\n    console.log('title: '+ this.navParams.get('title'));\n\n    var title = this.navParams.get('title');\n\n    if(title){\n      this.shoppingList$ = this.shopping\n      .getSelectedLabelItems(title)\n      .snapshotChanges()\n      .pipe(\n        map(changes =>\n          changes.map(c => (\n            {\n              key: c.payload.key, ...c.payload.val()\n            }\n          )))\n      );\n    }\n    \n  }\n\n  //filter items\n  searchItems(event) {\n    var val = event.target.value;\n    // console.log(val.toLowerCase());\n    // console.log(event.timeStamp);\n\n    if(event.timeStamp - this.lastKeypress > 500){\n        this.shoppingList$ = this.shopping.getFiltersList(val).snapshotChanges()\n        .pipe(\n        map(changes =>\n          changes.map(c => (\n            {\n              key: c.payload.key, ...c.payload.val()\n            }\n          )))\n      );\n    }\n\n    this.lastKeypress = event.timeStamp;\n  }\n\n  //to show the active items when user tries to search items form DB.\n  showActive(item: any): any {\n    // console.log(item);\n    if(item.status === 'active'){\n      return false;\n    } \n    return true;\n  }\n\n  //more options\n  moreOptions(item) {\n    let actionSheet = this.actionSheetCtrl.create({\n      title: 'More',\n      buttons: [\n        {\n          text: 'Trash',\n          role: 'destructive', // will always sort to be on the top\n          handler: () => {\n            console.log('Deleted task: ' +item.title);\n            item.status = \"trash\";\n            this.shopping.editItem(item).then(()=> {\n              console.log(item.status);\n              this.toast.show(`${item.title} trashed !`);\n            }) \n          }\n        },\n        {\n          text: 'Share',\n          handler: () => {\n            console.log('Shared task: ' +item.title);\n            this.toast.show(`${item.title} shared !`);\n          }\n        },\n        {\n          text: 'Archive',\n          handler: () => {\n            // console.log('Status : ' +item.status);\n            // console.log('Item Name : ' +item.title);\n            item.status = \"archive\";\n            this.shopping.editItem(item).then(()=> {\n              console.log(item.status);\n              this.toast.show(`${item.title} archived !`);\n              this.navCtrl.setRoot('HomePage');\n            }) \n          }\n        },\n        {\n          text: 'Cancel',\n          role: 'cancel', // will always sort to be on the bottom\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        }\n      ]\n    });\n\n    actionSheet.present(); //presenting the action sheet.\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}